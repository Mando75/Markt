fragment playerExperimentFragment on Experiment {
  id
  status
  activeSession {
    id
    sessionNumber
    active
  }
  activeRound {
    id
    roundNumber
    active
    roundSummary {
      numTransactions
      averagePrice
      maxPrice
      minPrice
      transactions {
        id
        amount
        buyerProfit
        sellerProfit
        buyer {
          id
          player {
            id
            playerCode
            firstName
            lastName
          }
        }
        seller {
          id
          player {
            id
            playerCode
            firstName
            lastName
          }
        }
      }
    }
  }
}

query er_experimentQuery($experimentId: ID!) {
  experiment(id: $experimentId) {
    ...playerExperimentFragment
  }
}

subscription er_experimentStatusUpdateSubscription($experimentId: ID!) {
  experimentStatusChanged(experimentId: $experimentId) {
    ...playerExperimentFragment
  }
}

query er_experimentPlayerQuery($experimentPlayerId: ID!) {
  experimentPlayer(id: $experimentPlayerId) {
    id
    playerCode
    currentSessionRole {
      name
      value
      allowSell
      profitEquation
      instructions {
        step
        header
        bullets {
          format
          text
        }
      }
    }
    experiment {
      ...plaerExperimentFragment
    }
  }
}
