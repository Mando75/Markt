fragment experimentFragment on Experiment {
  id
  status
  activeSession {
    id
    sessionNumber
    active
  }
  activeRound {
    id
    roundNumber
    active
  }
}

query er_experimentQuery($experimentId: ID!) {
  experiment(id: $experimentId) {
    ...experimentFragment
  }
}

subscription er_experimentStatusUpdateSubscription($experimentId: ID!) {
  experimentStatusChanged(experimentId: $experimentId) {
    ...experimentFragment
  }
}

query er_experimentPlayerQuery($experimentPlayerId: ID!) {
  experimentPlayer(id: $experimentPlayerId) {
    id
    playerCode
    currentSessionRole {
      name
      value
      allowSell
      profitEquation
      instructions {
        step
        header
        bullets {
          format
          text
        }
      }
    }
  }
}

mutation makeTransactionMutation($experimentId: ID!, $sellerCode: ID!, $buyerCode: ID!, $amount: Float!) {
  makeTransaction(params: {
    experimentId: $experimentId,
    sellerCode: $sellerCode,
    buyerCode: $buyerCode,
    amount: $amount
  }) {
    id
    amount
    buyerProfit
    sellerProfit
  }
}
